<UserControl x:Class="CycleCity_6.Tools.CyclistViewer.CyclistViewerView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:esri="http://schemas.esri.com/arcgis/runtime/2013"
             mc:Ignorable="d" d:DesignHeight="300" d:DesignWidth="300">
    <UserControl.DataContext>
        <Binding Source="{StaticResource ResourceKey=ViewModelLocator}" Path="CyclistViewerViewModel" />
    </UserControl.DataContext>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="5*" />
            <ColumnDefinition />
        </Grid.ColumnDefinitions>
        
        <esri:MapView Grid.Column="0" MouseDown="CycleMapView_MouseDown" Name="CycleMapView" Margin="0,0,10,0">
            <esri:Map x:Name="CycleMap">
                
                <esri:Map.InitialViewpoint>
                    <esri:ViewpointExtent XMin="1091513"
                                 YMin="7102386"
                                 XMax="1137172"
                                 YMax="7069974"/>
                </esri:Map.InitialViewpoint>

                <esri:ArcGISTiledMapServiceLayer x:Name="DarkMap"
                                                 ServiceUri="http://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer"
                                                 IsVisible="True">
                </esri:ArcGISTiledMapServiceLayer>
                <esri:WmsLayer ServiceUri="http://geodienste.hamburg.de/HH_WMS_RadwegeGIS" 
                               x:Name="FahrradwegLayer"/>

                <esri:GraphicsLayer ID="CyclistLayer">
                    <esri:GraphicsLayer.Renderer>
                        <esri:SimpleRenderer>
                            <esri:SimpleRenderer.Symbol>
                                <esri:SimpleLineSymbol Color="Tomato" Width="3" />
                            </esri:SimpleRenderer.Symbol>
                        </esri:SimpleRenderer>
                    </esri:GraphicsLayer.Renderer>
                </esri:GraphicsLayer>
            </esri:Map>
        </esri:MapView>
        
        <ListBox ItemsSource="{Binding Path=Cyclists}" SelectedItem="{Binding Path=SelectedCyclist}" SelectionChanged="CyclistListBox_OnSelectionChanged" Grid.Column="1">
            <ListBox.ItemContainerStyle>
                <Style TargetType="ListBoxItem">
                    <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                </Style>
            </ListBox.ItemContainerStyle>
            
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <DockPanel>
                        <TextBlock DockPanel.Dock="Right" Text="{Binding Path=Distance, StringFormat={}{0:0.00 m}}" />

                        <TextBlock DockPanel.Dock="Left" Text="{Binding Path=Name}" />
                    </DockPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
    </Grid>
</UserControl>

